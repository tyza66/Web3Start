完成工作量证明的节点有优先的记账权
如果两个节点同时完成工作量证明，因为没有中心化的仲裁机构，就要用到共识机制
共识机制就是大家都要遵守的协议
一个节点的工作量只有在其他的认同的情况下才是有效的
就是说每个节点的结果需要得到其他节点的认证之后才会加入到区块链之中并且在网络上传播
如果不遵守规则，那打包的区块没受到认可不会加到其他区块链中而得不到收益
如果两个节点同时完成工作量证明，那么选择累计工作量最大的区块链或者说难度最大的一条链
之后去延长这个最长的链
因为节点传播是有速度限制的，有时候会出现两条链，或多条链
先收到某条链的广播后的那条链 找到最长的一条链
在比特币网络中，最长的有效链通常被认为是最可靠、最准确的记账记录。这种机制被称为“最长链共识”
串这些区块的时候可以是先接到后面的节点 之后再接到前面的节点，这样可以将那些节点快速保存
比特币将间隔设置为十分钟是在更加快的交易确认和更低的分叉概率之间做出的妥协
更短的区块产生间隔会让交易更快的确认完成，但是也会导致更加频繁的产生分叉
长的间隔减少分叉的数量但是也会导致更长的确认时间

完整的共识机制是工作量最大+最长链的选择
在比特币网络中，理论上两个链的工作量和长度完全一样的情况非常罕见，但如果真的发生了，一般的处理方式是等待更多的区块出现，直到有一条链明显更长，从而确认最终的共识链。

具体来说，当网络中出现两个长度相同且工作量相同的链时，矿工们会随机选择其中一条链进行继续挖矿。这意味着在稍后的时间内，其中一条链会比另一条链增加更多的区块，变得更长。其他节点将会遵循最长链规则，选择最长且最有工作量证明的那条链。

在这种情况下，短时间内可能会有一些不确定性，但随着时间的推移和更多区块的添加，网络最终会达成共识，选择一条最长链作为最终的有效链。

这种机制确保了比特币网络在面对偶尔出现的冲突时，能够逐步达成共识，保持网络的稳定和安全。

在比特币网络中，每个区块都包含了一些特定的信息，用于识别哪个矿工成功挖出了这个区块。这些信息包括：

区块头（Block Header）：每个区块都有一个区块头，区块头包含了该区块的基本信息，其中包括前一个区块的哈希值和一个随机数（nonce）。

Coinbase交易：这是区块中的第一笔交易，称为“Coinbase交易”。这笔交易没有输入（input），只有输出（output），用于给成功挖出该区块的矿工发放奖励。Coinbase交易中包含了矿工的比特币地址，这个地址就是矿工在挖矿时提供的地址。

当网络中选择了一条链作为有效链后，该链上每个区块中的Coinbase交易会自动将奖励发放到对应的矿工地址。因此，矿工的奖励是直接在区块中记录的，并通过Coinbase交易分发。

通过这种方式，比特币网络确保了矿工能够获得他们应得的奖励，并且整个过程是公开透明的。每个节点和用户都可以查看区块链中的交易，验证矿工的奖励发放是否正确。